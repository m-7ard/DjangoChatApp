<div class="formbox has-shadow">
	<nav class="formbox__navigation">
		<div class="formbox__button" data-command="navigate-form" data-target="#ChannelEditForm">
			Edit Channel
		</div>
		<div class="formbox__button"  data-command="navigate-form" data-target="#ChannelCategoryForm">
			Change Channel Category
		</div>
		<div class="formbox__button">
			Manage Channel Permissions
		</div>
	</nav>
	<form class="form" action="{% url 'update-channel' channel=channel.pk %}" method="POST" enctype="multipart/form-data" id="ChannelEditForm">
		{% csrf_token %}
		<input type="hidden" name="form" value="ChannelEditForm">
		<div class="form__header">
			<div>
				<div class="form__title">
					Edit Channel
				</div>
				<div class="form__subtitle">
					{{ category.name }}
				</div>
			</div>
			<div class="form__close overlay__close">
				<div class="icon icon--small">
					<i class="material-symbols-outlined">
						close
					</i>
				</div>
			</div>
		</div>
		{% for field in ChannelEditForm %}
		{% with field|attribute_modifier:'{"attribute": "errors", "on_success": "form__field--error"}' as modifier %}
			<div class="form__field {{ modifier }}">
				<div class="form__label">
					{{ field.label }}
				</div>
				<div class="form__input">
					{{ field }}
				</div>
				{% for error in field.errors %}
				<div class="form__error">
					{{ error }}
				</div>
				{% endfor %}
			</div>
		{% endwith %}
		{% endfor %}
		<button class="form__submit" type="submit">
			Submit
		</button>
	</form>
	<form class="form form--hidden" action="{% url 'update-channel' channel=channel.pk %}" method="POST" enctype="multipart/form-data" id="ChannelCategoryForm">
		{% csrf_token %}
		<input type="hidden" name="form" value="ChannelCategoryForm">
		<div class="form__header">
			<div>
				<div class="form__title">
					Change Channel Category
				</div>
				<div class="form__subtitle">
					{{ category.name }}
				</div>
			</div>
			<div class="form__close overlay__close">
				<div class="icon icon--small">
					<i class="material-symbols-outlined">
						close
					</i>
				</div>
			</div>
		</div>
		{% with ChannelCategoryForm.category|attribute_modifier:'{"attribute": "errors", "on_success": "form__field--error"}' as modifier %}
			<div class="form__field {{ modifier }}">
				<div class="form__label">
					{{ ChannelCategoryForm.category.label }}
				</div>
				<div class="select">
					<div class="select__trigger option option--round">
						<span class="option__name">
							{{ category.name }}
						</span>
						<span class="option__expand right">
							<div class="icon icon--small right">
								<i class="material-symbols-outlined">
									expand_more
								</i>
							</div>
						</span>
					</div>
					<fieldset class="select__options">
						{% for object in channel.room.categories.all %}
						<div class="option" data-command="select-option" data-value="{{ object.name }}">
							<input type="radio" name="category" value="{{ object.pk }}">
							<span class="option__name">
								{{ object.name }}
							</span>
						</div>
						{% endfor %}
					</fieldset>
				</div>
				{% for error in ChannelCategoryForm.category.errors %}
				<div class="form__error">
					{{ error }}
				</div>
				{% endfor %}
			</div>
		{% endwith %}
		<button class="form__submit" type="submit">
			Submit
		</button>
	</form>	

</div>
